<!doctype html>
<html>
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.3/TweenMax.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.3/TimelineMax.min.js"></script>
    <script>
      console.clear();

const slider = document.querySelector('.slider');
const items = document.querySelectorAll('.slider-item');
const dist = 15;



function playTl() {
  let tl = new TimelineMax();
    tl.to(document.querySelector('[data-index="0"]'), .3, {
        transform:"translateX(110%) translateZ(0) translateY(0)"
      })
      .add('here', .2)
      .to(document.querySelector('[data-index="0"]'), .4, {
        transform:`translateX(100%) translateZ(-${(items.length) * dist}px) translateY(-${(items.length) * dist}px) `
      })
      .to(document.querySelector('[data-index="0"]'), .3, {
        transform:`translateX(0) translateZ(-${(items.length) * dist}px) translateY(-${(items.length) * dist}px) `
      }, "-=.2")

    items.forEach(item => {
      if (item.dataset.index > 0) {
        tl.to(item, .5, {
          transform:`translateX(0) translateZ(-${item.dataset.index * dist}px) translateY(-${item.dataset.index * dist}px)`
        }, 'here')
      }
    })
};

slider.addEventListener('click', e => {
  playTl();

  items.forEach(item => {
    if (item.dataset.index > 0) {
      item.dataset.index--;
      console.log(item);
    } else {
      item.dataset.index = items.length - 1;
      // console.log(item.style.transform);
    }

  });

  // document.querySelector('[data-index="0"]').style.animation = "toBottom 1s forwards";
  // document.querySelector('[data-index="1"]').style.animation = "toTop1 1s forwards";
  // document.querySelector('[data-index="2"]').style.animation = "toTop2 1s forwards";
});

playTl()

    </script>
    <style>
      .scene {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  width: 100vw;
  overflow: hidden;
}

.slider {
  position: relative;
  width: 500px;
  height: 500px;
  perspective: 500px;
  transform-style: preserve-3d;
}

.slider-item {
  position: absolute;
  top: 0;
  left: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 500px;
  height: 500px;
  border-radius: 50%;  
  box-shadow: 0 10px 20px rgba(0,0,0,.15);
  overflow: hidden;
}
    </style>
  </head>
  <body>
    <div class="scene">
  <div class="slider">
    <div class="slider-item slider-item-0" data-index="0">
      <img src="https://picsum.photos/500/500?image=800" alt="">
    </div>
    <div class="slider-item slider-item-1" data-index="1">
      <img src="https://picsum.photos/500/500?image=830" alt="">
    </div>
    <div class="slider-item slider-item-2" data-index="2">
      <img src="https://picsum.photos/500/500?image=853" alt="">
    </div>
    <div class="slider-item slider-item-2" data-index="3">
      <img src="https://picsum.photos/500/500?image=862" alt="">
    </div>
    <div class="slider-item slider-item-2" data-index="4">
      <img src="https://picsum.photos/500/500?image=865" alt="">
    </div>
    <div class="slider-item slider-item-2" data-index="5">
      <img src="https://picsum.photos/500/500?image=867" alt="">
    </div>
  </div>
</div>
  </body>
</html>
